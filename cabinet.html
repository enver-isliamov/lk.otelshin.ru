<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Личный кабинет</title>
</head>
<body>
  <div id="app">Загрузка...</div>

  <script>
    function getQueryParams() {
      const params = {};
      const search = new URLSearchParams(window.location.search);
      for (const [key, val] of search.entries()) {
        params[key] = val;
      }
      return params;
    }

    const params = getQueryParams();
    const chatId = params.id;
    const firstName = params.first_name || '';
    const username = params.username || '';

    if (!chatId) {
      document.getElementById('app').innerText = 'Ошибка: Chat ID не получен';
    } else {
      window.Telegram = {
        WebApp: {
          initDataUnsafe: {
            user: {
              id: chatId,
              first_name: firstName,
              username: username
            }
          },
          ready: () => {}
        }
      };

      const script = document.createElement('script');
      script.src = './script.js';
      document.body.appendChild(script);
    }
  </script>
</body>
</html>
